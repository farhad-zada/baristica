<!DOCTYPE html>
<html dir="ltr">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
	<meta name="format-detection" content="telephone=no" />
	<style type="text/css">
		body {
			margin: 0;
			padding: 8px;
		}

		p {
			line-height: 1.15;
			margin: 0;
			white-space: pre-wrap;
		}

		ol,
		ul {
			margin-top: 0;
			margin-bottom: 0;
		}

		img {
			border: none;
		}

		li>p {
			display: inline;
		}
	</style>
</head>

<body>
</body>

</html>
<!DOCTYPE html>
<html lang="ru">

<head>
	<meta http-equiv='Content-Type' content='text/html; charset=UTF-8'>
	<title>
		Анкетирование по договору Договор (с покупателем) № ДУ-72.204-46 от 20.01.2025 (На согласовании) на сумму 5 410
		000 RUB
	</title>
	<style>
		.hidden{
			display: none;
		}
		.div {
			-moz-hyphens: auto;
			-webkit-hyphens: auto;
			-ms-hyphens: auto;
		}

		.form-container {
			background: #fff;
			margin: 0 auto;
			text-align: left;
			width: 640px;
		}

		.form-anketa {
			font-family: sans-serif;
			font-size: 14px;
			margin: 20px 20px 0;
			padding: 0 0 20px;
		}

		.flex {
			display: flex;
		}

		.flex-column {
			flex-direction: column;
		}

		.flex-wrap {
			flex-wrap: wrap;
		}

		.flex-basic-100 {
			flex-basis: 100%;
		}

		.flex-basic-50 {
			flex-basis: 50%;
		}

		.flex-basic-13 {
			flex-basis: 13%;
		}

		.flex-basic-9 {
			flex-basis: 9%;
		}

		.align-items-center {
			align-items: center;
		}

		.justify-content-between {
			justify-content: space-between;
		}

		.question-title {
			padding-bottom: 5px;
			margin: 0;
		}

		.font-weight-bold {
			font-weight: 700;
		}

		.margin-bottom-20 {
			margin-bottom: 20px;
		}

		.margin-bottom-5 {
			margin-bottom: 5px;
		}

		.padding-5 {
			padding: 5px;
		}

		.anketa {
			border-bottom: 1px dotted #ccc;
			margin-bottom: 16px;
			padding: 0 5px;
		}

		.anketa h2 {
			font-size: 22px;
			font-weight: 400;
			margin: 0 0 5px;
		}

		.choice {
			line-height: 20px;
			width: 75%;
		}

		.checkbox {
			margin: 0 20px 0 10px;
		}

		.button-submit {
			border: 2px solid #d9a520;
			border-radius: 10px;
			background-color: #e7c15e;
			padding: 10px;
			font-size: 16px;
		}

		.button-submit:hover {
			background-color: #e1b032;
		}
	</style>
	<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'></script>
</head>

<body>
	<div class='form-container'>
		<h2>Вопросы</h2>
		<div class='flex flex-column'>
			<div class='question flex flex-wrap margin-bottom-20 padding-5'>
				<div class='question-title font-weight-bold flex-basic-100'>Вы проживаете в ЖК? </div>
				<div class='flex justify-content-between flex-basic-50 align-items-center margin-bottom-5'>
					<label class='choice'>Не проживаю, но проживает родственник/знакомый</label>
					<input id='_cdfb937d-a660-11ef-aa9e-00155dff218d' class='checkbox' type='radio'
						name='_6b5b9b10-a660-11ef-aa9e-00155dff218d' typeofvalue='Справочник.ВариантыОтветовАнкет'
						onclick="" />
				</div>
				<div class='flex justify-content-between flex-basic-50 align-items-center margin-bottom-5'>
					<label class='choice'>Не проживаю, продал квартиру</label>
					<input id='_d7050f15-a660-11ef-aa9e-00155dff218d' class='checkbox' type='radio'
						name='_6b5b9b10-a660-11ef-aa9e-00155dff218d' typeofvalue='Справочник.ВариантыОтветовАнкет'
						onclick="" />
				</div>
				<div class='flex justify-content-between flex-basic-50 align-items-center margin-bottom-5'>
					<label class='choice'>Не проживаю, сдаю квартиру</label>
					<input id='_e2da7a8c-a660-11ef-aa9e-00155dff218d' class='checkbox' type='radio'
						name='_6b5b9b10-a660-11ef-aa9e-00155dff218d' typeofvalue='Справочник.ВариантыОтветовАнкет'
						onclick="" />
				</div>
				<div class='flex justify-content-between flex-basic-50 align-items-center margin-bottom-5'>
					<label class='choice'>Проживаю не постоянно, живу на несколько квартир/городов</label>
					<input id='_e8dcd322-a660-11ef-aa9e-00155dff218d' class='checkbox' type='radio'
						name='_6b5b9b10-a660-11ef-aa9e-00155dff218d' typeofvalue='Справочник.ВариантыОтветовАнкет'
						onclick="" />
				</div>
				<div class='flex justify-content-between flex-basic-50 align-items-center margin-bottom-5'>
					<label class='choice'>Проживаю на постоянной основе </label>
					<input id='_eed00917-a660-11ef-aa9e-00155dff218d' class='checkbox' type='radio'
						name='_6b5b9b10-a660-11ef-aa9e-00155dff218d' typeofvalue='Справочник.ВариантыОтветовАнкет'
						onclick="" />
				</div>
			</div>
			<div class='question flex flex-wrap margin-bottom-20 padding-5 hidden'>
				<div class='question-title font-weight-bold flex-basic-100'>Как часто вы находились в квартире за
					последние 6 месяцев? </div>
				<div class='flex justify-content-between flex-basic-50 align-items-center margin-bottom-5'>
					<label class='choice'>Ни разу</label>
					<input id='_6e9fa422-a663-11ef-aa9e-00155dff218d' class='checkbox' type='radio'
						name='_62b11f7b-a663-11ef-aa9e-00155dff218d' typeofvalue='Справочник.ВариантыОтветовАнкет'
						onclick="" />
				</div>
				<div class='flex justify-content-between flex-basic-50 align-items-center margin-bottom-5'>
					<label class='choice'>1-2 раза</label>
					<input id='_713af567-a663-11ef-aa9e-00155dff218d' class='checkbox' type='radio'
						name='_62b11f7b-a663-11ef-aa9e-00155dff218d' typeofvalue='Справочник.ВариантыОтветовАнкет'
						onclick="" />
				</div>
				<div class='flex justify-content-between flex-basic-50 align-items-center margin-bottom-5'>
					<label class='choice'>3-5 раз</label>
					<input id='_745a1218-a663-11ef-aa9e-00155dff218d' class='checkbox' type='radio'
						name='_62b11f7b-a663-11ef-aa9e-00155dff218d' typeofvalue='Справочник.ВариантыОтветовАнкет'
						onclick="" />
				</div>
				<div class='flex justify-content-between flex-basic-50 align-items-center margin-bottom-5'>
					<label class='choice'>Более 5 раз</label>
					<input id='_9c1d51a3-a663-11ef-aa9e-00155dff218d' class='checkbox' type='radio'
						name='_62b11f7b-a663-11ef-aa9e-00155dff218d' typeofvalue='Справочник.ВариантыОтветовАнкет'
						onclick="" />
				</div>
			</div>
			<div class='question flex flex-wrap margin-bottom-20 padding-5 hidden'>
				<div class='question-title font-weight-bold flex-basic-100'>Знаете ли вы про услуги ремонта от ЭНКО
					Фамили? </div>
				<div class='flex justify-content-between flex-basic-50 align-items-center margin-bottom-5'>
					<label class='choice'>Да, знаю</label>
					<input id='_0ce4c20a-a667-11ef-aa9e-00155dff218d' class='checkbox' type='radio'
						name='_21b2e86a-a667-11ef-aa9e-00155dff218d' typeofvalue='Справочник.ВариантыОтветовАнкет'
						onclick="" />
				</div>
				<div class='flex justify-content-between flex-basic-50 align-items-center margin-bottom-5'>
					<label class='choice'>Что-то слышал, но полного представления не имею</label>
					<input id='_164b8ad5-a667-11ef-aa9e-00155dff218d' class='checkbox' type='radio'
						name='_21b2e86a-a667-11ef-aa9e-00155dff218d' typeofvalue='Справочник.ВариантыОтветовАнкет'
						onclick="" />
				</div>
				<div class='flex justify-content-between flex-basic-50 align-items-center margin-bottom-5'>
					<label class='choice'>Нет, не знаю</label>
					<input id='_1ec8bebf-a667-11ef-aa9e-00155dff218d' class='checkbox' type='radio'
						name='_21b2e86a-a667-11ef-aa9e-00155dff218d' typeofvalue='Справочник.ВариантыОтветовАнкет'
						onclick="" />
				</div>
			</div>
			<div class='question flex flex-wrap margin-bottom-20 padding-5 hidden'>
				<div class='question-title font-weight-bold flex-basic-100'>Вы сделали ремонт в квартире? </div>
				<div class='flex justify-content-between flex-basic-50 align-items-center margin-bottom-5'>
					<label class='choice'>Да, нанимал бригаду</label>
					<input id='_804f4aa4-a669-11ef-aa9e-00155dff218d' class='checkbox' type='radio'
						name='_ac3e65f0-a669-11ef-aa9e-00155dff218d' typeofvalue='Справочник.ВариантыОтветовАнкет'
						onclick="" />
				</div>
				<div class='flex justify-content-between flex-basic-50 align-items-center margin-bottom-5'>
					<label class='choice'>Да, делал сам/со знакомыми/родственниками</label>
					<input id='_85f848c8-a669-11ef-aa9e-00155dff218d' class='checkbox' type='radio'
						name='_ac3e65f0-a669-11ef-aa9e-00155dff218d' typeofvalue='Справочник.ВариантыОтветовАнкет'
						onclick="" />
				</div>
				<div class='flex justify-content-between flex-basic-50 align-items-center margin-bottom-5'>
					<label class='choice'>Да, обращался в Энко Фамили</label>
					<input id='_8bf46779-a669-11ef-aa9e-00155dff218d' class='checkbox' type='radio'
						name='_ac3e65f0-a669-11ef-aa9e-00155dff218d' typeofvalue='Справочник.ВариантыОтветовАнкет'
						onclick="" />
				</div>
				<div class='flex justify-content-between flex-basic-50 align-items-center margin-bottom-5'>
					<label class='choice'>Да, обращался к услугам других компаний по ремонту</label>
					<input id='_8f1acccf-a669-11ef-aa9e-00155dff218d' class='checkbox' type='radio'
						name='_ac3e65f0-a669-11ef-aa9e-00155dff218d' typeofvalue='Справочник.ВариантыОтветовАнкет'
						onclick="" />
				</div>
				<div class='flex justify-content-between flex-basic-50 align-items-center margin-bottom-5'>
					<label class='choice'>Нет, не делал, но собираюсь начать</label>
					<input id='_956164f9-a669-11ef-aa9e-00155dff218d' class='checkbox' type='radio'
						name='_ac3e65f0-a669-11ef-aa9e-00155dff218d' typeofvalue='Справочник.ВариантыОтветовАнкет'
						onclick="" />
				</div>
				<div class='flex justify-content-between flex-basic-50 align-items-center margin-bottom-5'>
					<label class='choice'>Нет, не делал и не собираюсь начинать</label>
					<input id='_a13f229e-a669-11ef-aa9e-00155dff218d' class='checkbox' type='radio'
						name='_ac3e65f0-a669-11ef-aa9e-00155dff218d' typeofvalue='Справочник.ВариантыОтветовАнкет'
						onclick="" />
				</div>
			</div>
			<div class='question flex flex-wrap margin-bottom-20 padding-5 hidden'>
				<div class='question-title font-weight-bold flex-basic-100'>Характеристики по квартире: </div>
			</div>
			<div class='question flex flex-wrap margin-bottom-20 padding-5 hidden'>
				<div class='question-title font-weight-bold flex-basic-100'>Насколько вы в целом удовлетвоены качеством
					жизни в доме ЭНКО? Оцените от 1 до 7: </div>
			</div>
			<div class='question flex flex-wrap margin-bottom-20 padding-5 hidden'>
				<div class='question-title font-weight-bold flex-basic-100'>С какой вероятностью Вы порекомендуете
					компанию ЭНКО своим родственникам, друзьям, знакомым и коллегам? (от 0 до 10, где 0 абсолютно не
					готов рекомендовать, 10 готов рекомендовать): </div>
			</div>
			<div class='question margin-bottom-20 padding-5 hidden'>
				<div class='question-title font-weight-bold flex-basic-100'>Если вы выбрали от 0 до 6, почему вы не готовы рекомендовать ЭНКО? </div>
				<div>
					<input id='_3aed77d8-d319-11ef-aa9f-00155dff218d' class='text small' type='text' maxlength='255'
						value='' />
				</div>
			</div>
			<div class='flex flex-wrap margin-bottom-20 padding-5'>
				<input onclick='sendJSON()' class='button-submit' type='submit' name='submit' value='Отправить' />
				<button class="button-previous hidden">Предыдущий</button>
				<!-- Кнопка "Далее" -->
				<button class="button-next">Далее</button>
			</div>
			<p class='result' style='color:blue'></p>
		</div>
	</div>

	<script>
		// эта функция сработает при нажатии на кнопку
		function sendJSON() {
			// с помощью jQuery обращаемся к элементам на странице по их именам
			let questions = [];
			questions.push({ question: '_6b5b9b10-a660-11ef-aa9e-00155dff218d', answers: ['_cdfb937d-a660-11ef-aa9e-00155dff218d', '_d7050f15-a660-11ef-aa9e-00155dff218d', '_e2da7a8c-a660-11ef-aa9e-00155dff218d', '_e8dcd322-a660-11ef-aa9e-00155dff218d', '_eed00917-a660-11ef-aa9e-00155dff218d'] });
			questions.push({ question: '_62b11f7b-a663-11ef-aa9e-00155dff218d', answers: ['_6e9fa422-a663-11ef-aa9e-00155dff218d', '_713af567-a663-11ef-aa9e-00155dff218d', '_745a1218-a663-11ef-aa9e-00155dff218d', '_9c1d51a3-a663-11ef-aa9e-00155dff218d'] });
			questions.push({ question: '_21b2e86a-a667-11ef-aa9e-00155dff218d', answers: ['_0ce4c20a-a667-11ef-aa9e-00155dff218d', '_164b8ad5-a667-11ef-aa9e-00155dff218d', '_1ec8bebf-a667-11ef-aa9e-00155dff218d'] });
			questions.push({ question: '_ac3e65f0-a669-11ef-aa9e-00155dff218d', answers: ['_804f4aa4-a669-11ef-aa9e-00155dff218d', '_85f848c8-a669-11ef-aa9e-00155dff218d', '_8bf46779-a669-11ef-aa9e-00155dff218d', '_8f1acccf-a669-11ef-aa9e-00155dff218d', '_956164f9-a669-11ef-aa9e-00155dff218d', '_a13f229e-a669-11ef-aa9e-00155dff218d'] });
			questions.push({ question: '_2f2e73da-a66b-11ef-aa9e-00155dff218d', answers: [] });
			questions.push({ question: '_dd33ecd1-d318-11ef-aa9f-00155dff218d', answers: [] });
			questions.push({ question: '_1f149e6a-d319-11ef-aa9f-00155dff218d', answers: [] });
			questions.push({ question: '_3aed77d8-d319-11ef-aa9f-00155dff218d', answers: ['_3aed77d8-d319-11ef-aa9f-00155dff218d'] });


			// а вот сюда мы поместим ответ от сервера
			let result = document.querySelector('.result');
			// создаём новый экземпляр запроса XHR
			let xhr = new XMLHttpRequest();
			// адрес, куда мы отправим нашу JSON-строку
			let url = 'https://hq-1c-test3.corp.enco72.ru/crm_stage/hs/extint/contract_anketa?type=post&contract=997501cb-d6fa-11ef-aa9f-00155dff218d';
			// открываем соединение
			xhr.open('POST', url, true);
			// устанавливаем заголовок — выбираем тип контента, который отправится на сервер, в нашем случае мы явно пишем, что это JSON
			xhr.setRequestHeader('Content-Type', 'application/json');
			// когда придёт ответ на наше обращение к серверу, мы его обработаем здесь
			xhr.onreadystatechange = function () {
				// если запрос принят и сервер ответил, что всё в порядке
				if (xhr.readyState === 4) {
					// выводим то, что ответил нам сервер — так мы убедимся, что данные он получил правильно
					result.innerHTML = this.responseText;
				}
			};
			// преобразуем наши данные JSON в строку
			var data = [];
			for (var i = 0; i < questions.length; i++) {
				var answers = questions[i].answers, selected = [];
				for (var j = 0; j < answers.length; j++) {
					var tag = document.querySelector('#' + answers[j]);
					if (answers[j].indexOf('_true') != -1 && tag.checked)
						selected.push({ 'value': true });
					else
						if (answers[j].indexOf('_false') != -1 && tag.checked)
							selected.push({ 'value': false });
						else
							if (tag.className == 'checkbox') {
								if (tag.checked) {
									if (tag.getAttribute('OpenAnswer') != null)
										selected.push({ 'link': answers[j].slice(1), 'typeofvalue': tag.getAttribute('typeofvalue'), 'openanswer': document.querySelector('#' + answers[j] + '_OpenAnswer').value });
									else
										selected.push({ 'link': answers[j].slice(1), 'typeofvalue': tag.getAttribute('typeofvalue') });
								}
							}
							else
								if (tag.className == 'flex-basic-13') {
									if (tag.checked)
										selected.push({ 'link': answers[j].slice(1), 'typeofvalue': tag.getAttribute('typeofvalue'), 'numstr': true });
								}
								else
									if (tag.value != '')
										selected.push({ 'value': tag.value });
				}
				if (selected.length == 0)
					continue;
				else {
					var name = questions[i].question.slice(1);
					data.push({ name, selected });
				}
			}
			var Json = JSON.stringify({ 'template': '9940d685-a659-11ef-aa9e-00155dff218d', 'data': data });
			// когда всё готово, отправляем JSON на сервер
			xhr.send(Json);
		}

		//Переменная для текущего индекса вопроса
		let currentQuestionIndex = 0;

		// Получаем элементы всех вопросов
		const questions = document.querySelectorAll('.question');

		// Получаем кнопки для навигации
		const prevButton = document.querySelector('.button-previous');
		const nextButton = document.querySelector('.button-next');

		function Show(id) {
			const element = document.getElementById(id);
			if (element) {
				element.classList.remove('hidden');
			}
		}

		function Hide(id) {
			const element = document.getElementById(id);
			if (element) {
				element.classList.add('hidden');
			}
		}

		/////// Тут я добавил 2 функции и обозначил sendbutton
		const sendButton = document.querySelector('.button-send');


		//Переход к предыдущему вопросу
		function showPreviousQuestion() {
			questions.forEach((question) => {
				question.style.display = 'none';
			});

			// Логика перехода для разных состояний
			//		 	if (currentQuestionIndex === 1 || currentQuestionIndex === 2) {
			//		 		currentQuestionIndex = 0;
			//		 	} else if (currentQuestionIndex === 3) {
			//		 		const selectedAnswer = document.querySelector('input[name="question1"]:checked');
			//		 		currentQuestionIndex = selectedAnswer && selectedAnswer.value === 'blue' ? 2 : 1; // Выбор предыдущего вопроса в зависимости от ответа
			//		 	}

			currentQuestionIndex--;

			questions[currentQuestionIndex].style.display = 'block'; // Отображаем текущий вопрос
			prevButton.classList.toggle('hidden', currentQuestionIndex === 0);
			nextButton.classList.toggle('hidden', currentQuestionIndex === questions.length - 1);
			sendButton.classList.add('hidden'); // Скрываем кнопку отправки
		}


		//Переход к следующему вопросу
		function showNextQuestion() {
			//		 	if (currentQuestionIndex === 0) {
			//		 		const selectedAnswer = document.querySelector('input[name="question1"]:checked');
			//		 		if (selectedAnswer) {
			//		 			currentQuestionIndex = selectedAnswer.value === 'blue' ? 2 : 1; // Выбор следующего вопроса в зависимости от ответа
			//		 		}
			//		 	} else if (currentQuestionIndex === 1) {
			//		 		currentQuestionIndex = 3; // Переход на последний вопрос
			//		 	} else {

			currentQuestionIndex++;
			//		 	}

			questions.forEach((question, index) => {
				question.style.display = index === currentQuestionIndex ? 'block' : 'none'; // Показываем текущий вопрос
			});

			prevButton.classList.remove('hidden'); // Показываем кнопку "Предыдущий"
			nextButton.classList.toggle('hidden', currentQuestionIndex === questions.length - 1);
			sendButton.classList.toggle('hidden', currentQuestionIndex !== questions.length - 1);
		}


		////// Также надо добавить это
		// Начальная настройка: показываем только первый вопрос
		questions.forEach((question, index) => {
			question.style.display = index === 0 ? 'block' : 'none';
		});

		// Навешиваем обработчики событий на кнопки
		prevButton.addEventListener('click', showPreviousQuestion);
		nextButton.addEventListener('click', showNextQuestion);


		function ShowHide(className, element, reverted = false) {
			if (element.className == 'checkbox')
				if (element.checked)
					display = 'block';
				else
					display = 'none';
			else
				if (element.value == '' || element.value == '0')
					display = 'none';
				else
					display = 'block';
			if (reverted)
				if (display == 'none')
					display = 'block';
				else
					display = 'none';
			var obj = document.getElementsByClassName(className);
			if (obj.length)
				for (let current of obj)
					if (current.style.display != display)
						current.style.display = display;
		}
		function CreateBlocks(names, name, count, Id) {
			countNum = Number(count);
			var tag = document.getElementById(Id).children[0];
			tag = tag.outerHTML;
			for (let i = 1; i <= countNum; i++) {
				tag += '<div class="flex flex-basic-100">';
				tag += ' <label class="choice flex-basic-9">' + i + '</label>';
				for (let name2 of names)
					tag += '<input id="' + name2 + '_' + i + '" class="flex-basic-13" typeofvalue="Справочник.ВариантыОтветовАнкет" type="radio" name="' + name + '_' + i + '"/>';
				tag += '</div>';
			}
			document.getElementById(Id).innerHTML = tag;
		}
	</script>

</body>

</html>
<!DOCTYPE html>
<html dir="ltr">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
	<meta name="format-detection" content="telephone=no" />
	<style type="text/css">
		body {
			margin: 0;
			padding: 8px;
		}

		p {
			line-height: 1.15;
			margin: 0;
			white-space: pre-wrap;
		}

		ol,
		ul {
			margin-top: 0;
			margin-bottom: 0;
		}

		img {
			border: none;
		}

		li>p {
			display: inline;
		}
	</style>
</head>

<body>
</body>

</html>